package fr.tikione.jacocoverage.plugin.config;

import fr.tikione.jacocoverage.plugin.util.IcoTxtComboBoxRenderer;
import fr.tikione.jacocoverage.plugin.util.NBUtils;
import fr.tikione.jacocoverage.plugin.util.Utils;
import java.awt.Color;
import java.awt.Cursor;
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.io.File;
import java.io.IOException;
import javax.swing.GroupLayout;
import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JCheckBox;
import javax.swing.JComboBox;
import javax.swing.JFileChooser;
import javax.swing.JLabel;
import javax.swing.JTextField;
import javax.swing.LayoutStyle;
import javax.swing.SwingConstants;
import javax.swing.filechooser.FileFilter;
import org.openide.awt.Mnemonics;
import org.openide.util.Exceptions;
import org.openide.util.NbBundle;

/**
 * JaCoCoverage configuration panel.
 *
 * @author Jonathan Lermitage
 */
class JaCoCoveragePanel extends javax.swing.JPanel {

	private static final long serialVersionUID = 1L;

	JaCoCoveragePanel(JaCoCoverageOptionsPanelController controller) {
		initComponents();
		try {
			// Add "NetBeans (default)" and "Norway Today (dark)" themes with colors preview.
			jComboBoxColorTheme.setRenderer(new IcoTxtComboBoxRenderer());
			ImageIcon thNetBeansImg = new ImageIcon(Utils.toBytes(Globals.THEME_ICO_REGULAR));
			ImageIcon thNorwaytoday = new ImageIcon(Utils.toBytes(Globals.THEME_ICO_NORWAYTODAY));
			thNetBeansImg.setDescription("NetBeans (default)");
			thNorwaytoday.setDescription("Norway Today");
			jComboBoxColorTheme.addItem(thNetBeansImg);
			jComboBoxColorTheme.addItem(thNorwaytoday);
			jComboBoxWorkfiles.setModel(new javax.swing.DefaultComboBoxModel<>(
					new String[]{"keep original workfiles", "keep zipped workfiles", "delete workfiles"}));
		} catch (IOException ex) {
			Exceptions.printStackTrace(ex);
		}
		// <editor-fold defaultstate="collapsed" desc="Tooltips">
		// Warning: background of tooltips is black on Ubuntu. Avoid coloring links with blue.
		jButtonSocialTwitter.setToolTipText("<html><body>Jonathan Lermitage on <b>Twitter</b> (author of JaCoCoverage)<br>"
				+ "https://twitter.com/JLermitage</body></html>");
		jButtonSocialFacebook.setToolTipText("<html><body>Jonathan Lermitage on <b>Facebook</b> (author of JaCoCoverage)<br>"
				+ "https://www.facebook.com/jonathan.lermitage</body></html>");
		jButtonSocialGithub.setToolTipText("<html><body>Jonathan Lermitage  on <b>GitHub</b> (author of JaCoCoverage)<br>"
				+ "https://github.com/jonathanlermitage</body></html>");
		jButtonSocialJojohome.setToolTipText("<html><body>Jonathan Lermitage devblog (author of JaCoCoverage)<br>"
				+ "http://lermitage.biz</body></html>");
		jButtonOnlineHelp.setToolTipText("<html><body>Online help page of JaCoCoverage<br>"
				+ "https://github.com/jonathanlermitage/tikione-jacocoverage/blob/master/README.md</body></html>");
		jButtonAbout.setToolTipText("<html><body>About JaCoCoverage</body></html>");
		// </editor-fold>
	}

	/**
	 * This method is called from within the constructor to initialize the form.
	 * WARNING: Do NOT modify this code. The content of this method is always regenerated by the Form Editor.
	 */
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jButtonResoreDefaults = new JButton();
        jCheckBoxEnableHighlighting = new JCheckBox();
        jCheckBoxEnableConsoleReport = new JCheckBox();
        jButtonSocialTwitter = new JButton();
        jButtonSocialFacebook = new JButton();
        jButtonSocialGithub = new JButton();
        jButtonOnlineHelp = new JButton();
        jButtonSocialJojohome = new JButton();
        jCheckBoxEnableHtmlReport = new JCheckBox();
        jCheckBoxOpenHtmlReport = new JCheckBox();
        jLabelColorTheme = new JLabel();
        jComboBoxColorTheme = new JComboBox<>();
        jLabelWorkfiles = new JLabel();
        jComboBoxWorkfiles = new JComboBox<>();
        jCheckBoxEnableHighlightingExtended = new JCheckBox();
        jLabelWorkfilesTips = new JLabel();
        jButtonAbout = new JButton();
        jLabelUseBundledJaCoCoJar = new JLabel();
        jCheckBoxUseBundledJaCoCoJar = new JCheckBox();
        jTextFieldUseCustomJaCoCoJar = new JTextField();
        jLabelUseCustomJaCoCoJar = new JLabel();
        jButtonSelectCustomJaCoCoJar = new JButton();
        jLabelEclemmaWebsite = new JLabel();

        jButtonResoreDefaults.setIcon(new ImageIcon(getClass().getResource("/fr/tikione/jacocoverage/plugin/resources/icon/famfamfam_defaults.png"))); // NOI18N
        Mnemonics.setLocalizedText(jButtonResoreDefaults, NbBundle.getMessage(JaCoCoveragePanel.class, "JaCoCoveragePanel.jButtonResoreDefaults.text")); // NOI18N
        jButtonResoreDefaults.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                jButtonResoreDefaultsActionPerformed(evt);
            }
        });

        Mnemonics.setLocalizedText(jCheckBoxEnableHighlighting, NbBundle.getMessage(JaCoCoveragePanel.class, "JaCoCoveragePanel.jCheckBoxEnableHighlighting.text")); // NOI18N
        jCheckBoxEnableHighlighting.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                jCheckBoxEnableHighlightingActionPerformed(evt);
            }
        });

        Mnemonics.setLocalizedText(jCheckBoxEnableConsoleReport, NbBundle.getMessage(JaCoCoveragePanel.class, "JaCoCoveragePanel.jCheckBoxEnableConsoleReport.text")); // NOI18N

        jButtonSocialTwitter.setIcon(new ImageIcon(getClass().getResource("/fr/tikione/jacocoverage/plugin/resources/icon/social_twitter.png"))); // NOI18N
        Mnemonics.setLocalizedText(jButtonSocialTwitter, NbBundle.getMessage(JaCoCoveragePanel.class, "JaCoCoveragePanel.jButtonSocialTwitter.text")); // NOI18N
        jButtonSocialTwitter.setBorderPainted(false);
        jButtonSocialTwitter.setContentAreaFilled(false);
        jButtonSocialTwitter.setCursor(new Cursor(Cursor.HAND_CURSOR));
        jButtonSocialTwitter.setMaximumSize(new Dimension(48, 24));
        jButtonSocialTwitter.setMinimumSize(new Dimension(48, 24));
        jButtonSocialTwitter.setPreferredSize(new Dimension(48, 24));
        jButtonSocialTwitter.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                jButtonSocialTwitterActionPerformed(evt);
            }
        });

        jButtonSocialFacebook.setIcon(new ImageIcon(getClass().getResource("/fr/tikione/jacocoverage/plugin/resources/icon/social_facebook.png"))); // NOI18N
        Mnemonics.setLocalizedText(jButtonSocialFacebook, NbBundle.getMessage(JaCoCoveragePanel.class, "JaCoCoveragePanel.jButtonSocialFacebook.text")); // NOI18N
        jButtonSocialFacebook.setBorderPainted(false);
        jButtonSocialFacebook.setContentAreaFilled(false);
        jButtonSocialFacebook.setCursor(new Cursor(Cursor.HAND_CURSOR));
        jButtonSocialFacebook.setMaximumSize(new Dimension(48, 24));
        jButtonSocialFacebook.setMinimumSize(new Dimension(48, 24));
        jButtonSocialFacebook.setPreferredSize(new Dimension(48, 24));
        jButtonSocialFacebook.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                jButtonSocialFacebookActionPerformed(evt);
            }
        });

        jButtonSocialGithub.setIcon(new ImageIcon(getClass().getResource("/fr/tikione/jacocoverage/plugin/resources/icon/social_github.png"))); // NOI18N
        Mnemonics.setLocalizedText(jButtonSocialGithub, NbBundle.getMessage(JaCoCoveragePanel.class, "JaCoCoveragePanel.jButtonSocialGithub.text")); // NOI18N
        jButtonSocialGithub.setBorderPainted(false);
        jButtonSocialGithub.setContentAreaFilled(false);
        jButtonSocialGithub.setCursor(new Cursor(Cursor.HAND_CURSOR));
        jButtonSocialGithub.setMaximumSize(new Dimension(48, 24));
        jButtonSocialGithub.setMinimumSize(new Dimension(48, 24));
        jButtonSocialGithub.setPreferredSize(new Dimension(48, 24));
        jButtonSocialGithub.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                jButtonSocialGithubActionPerformed(evt);
            }
        });

        jButtonOnlineHelp.setIcon(new ImageIcon(getClass().getResource("/fr/tikione/jacocoverage/plugin/resources/icon/famfamfam_help.png"))); // NOI18N
        Mnemonics.setLocalizedText(jButtonOnlineHelp, NbBundle.getMessage(JaCoCoveragePanel.class, "JaCoCoveragePanel.jButtonOnlineHelp.text")); // NOI18N
        jButtonOnlineHelp.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                jButtonOnlineHelpActionPerformed(evt);
            }
        });

        jButtonSocialJojohome.setIcon(new ImageIcon(getClass().getResource("/fr/tikione/jacocoverage/plugin/resources/icon/social_jojowebsite.png"))); // NOI18N
        Mnemonics.setLocalizedText(jButtonSocialJojohome, NbBundle.getMessage(JaCoCoveragePanel.class, "JaCoCoveragePanel.jButtonSocialJojohome.text")); // NOI18N
        jButtonSocialJojohome.setBorderPainted(false);
        jButtonSocialJojohome.setContentAreaFilled(false);
        jButtonSocialJojohome.setCursor(new Cursor(Cursor.HAND_CURSOR));
        jButtonSocialJojohome.setMaximumSize(new Dimension(48, 24));
        jButtonSocialJojohome.setMinimumSize(new Dimension(48, 24));
        jButtonSocialJojohome.setPreferredSize(new Dimension(48, 24));
        jButtonSocialJojohome.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                jButtonSocialJojohomeActionPerformed(evt);
            }
        });

        Mnemonics.setLocalizedText(jCheckBoxEnableHtmlReport, NbBundle.getMessage(JaCoCoveragePanel.class, "JaCoCoveragePanel.jCheckBoxEnableHtmlReport.text")); // NOI18N
        jCheckBoxEnableHtmlReport.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                jCheckBoxEnableHtmlReportActionPerformed(evt);
            }
        });

        Mnemonics.setLocalizedText(jCheckBoxOpenHtmlReport, NbBundle.getMessage(JaCoCoveragePanel.class, "JaCoCoveragePanel.jCheckBoxOpenHtmlReport.text")); // NOI18N

        Mnemonics.setLocalizedText(jLabelColorTheme, NbBundle.getMessage(JaCoCoveragePanel.class, "JaCoCoveragePanel.jLabelColorTheme.text")); // NOI18N

        Mnemonics.setLocalizedText(jLabelWorkfiles, NbBundle.getMessage(JaCoCoveragePanel.class, "JaCoCoveragePanel.jLabelWorkfiles.text")); // NOI18N

        Mnemonics.setLocalizedText(jCheckBoxEnableHighlightingExtended, NbBundle.getMessage(JaCoCoveragePanel.class, "JaCoCoveragePanel.jCheckBoxEnableHighlightingExtended.text")); // NOI18N

        jLabelWorkfilesTips.setBackground(new Color(255, 255, 255));
        jLabelWorkfilesTips.setIcon(new ImageIcon(getClass().getResource("/fr/tikione/jacocoverage/plugin/resources/icon/famfamfam_information.png"))); // NOI18N
        Mnemonics.setLocalizedText(jLabelWorkfilesTips, NbBundle.getMessage(JaCoCoveragePanel.class, "JaCoCoveragePanel.jLabelWorkfilesTips.text")); // NOI18N
        jLabelWorkfilesTips.setVerticalAlignment(SwingConstants.TOP);
        jLabelWorkfilesTips.setVerticalTextPosition(SwingConstants.TOP);

        jButtonAbout.setIcon(new ImageIcon(getClass().getResource("/fr/tikione/jacocoverage/plugin/resources/icon/famfamfam_information.png"))); // NOI18N
        Mnemonics.setLocalizedText(jButtonAbout, NbBundle.getMessage(JaCoCoveragePanel.class, "JaCoCoveragePanel.jButtonAbout.text")); // NOI18N
        jButtonAbout.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                jButtonAboutActionPerformed(evt);
            }
        });

        Mnemonics.setLocalizedText(jLabelUseBundledJaCoCoJar, NbBundle.getMessage(JaCoCoveragePanel.class, "JaCoCoveragePanel.jLabelUseBundledJaCoCoJar.text")); // NOI18N

        Mnemonics.setLocalizedText(jCheckBoxUseBundledJaCoCoJar, NbBundle.getMessage(JaCoCoveragePanel.class, "JaCoCoveragePanel.jCheckBoxUseBundledJaCoCoJar.text")); // NOI18N
        jCheckBoxUseBundledJaCoCoJar.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                jCheckBoxUseBundledJaCoCoJarActionPerformed(evt);
            }
        });

        jTextFieldUseCustomJaCoCoJar.setText(NbBundle.getMessage(JaCoCoveragePanel.class, "JaCoCoveragePanel.jTextFieldUseCustomJaCoCoJar.text")); // NOI18N

        Mnemonics.setLocalizedText(jLabelUseCustomJaCoCoJar, NbBundle.getMessage(JaCoCoveragePanel.class, "JaCoCoveragePanel.jLabelUseCustomJaCoCoJar.text")); // NOI18N

        Mnemonics.setLocalizedText(jButtonSelectCustomJaCoCoJar, NbBundle.getMessage(JaCoCoveragePanel.class, "JaCoCoveragePanel.jButtonSelectCustomJaCoCoJar.text")); // NOI18N
        jButtonSelectCustomJaCoCoJar.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                jButtonSelectCustomJaCoCoJarActionPerformed(evt);
            }
        });

        jLabelEclemmaWebsite.setForeground(new Color(0, 102, 255));
        Mnemonics.setLocalizedText(jLabelEclemmaWebsite, NbBundle.getMessage(JaCoCoveragePanel.class, "JaCoCoveragePanel.jLabelEclemmaWebsite.text")); // NOI18N
        jLabelEclemmaWebsite.setCursor(new Cursor(Cursor.HAND_CURSOR));
        jLabelEclemmaWebsite.addMouseListener(new MouseAdapter() {
            public void mouseClicked(MouseEvent evt) {
                jLabelEclemmaWebsiteMouseClicked(evt);
            }
        });

        GroupLayout layout = new GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(layout.createParallelGroup(GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(jButtonSocialTwitter, GroupLayout.PREFERRED_SIZE, 28, GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jButtonSocialFacebook, GroupLayout.PREFERRED_SIZE, 28, GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jButtonSocialGithub, GroupLayout.PREFERRED_SIZE, 28, GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jButtonSocialJojohome, GroupLayout.PREFERRED_SIZE, 28, GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(jButtonAbout)
                .addPreferredGap(LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jButtonOnlineHelp)
                .addPreferredGap(LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jButtonResoreDefaults))
            .addComponent(jLabelWorkfilesTips)
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jLabelUseBundledJaCoCoJar)
                        .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jCheckBoxUseBundledJaCoCoJar)
                        .addPreferredGap(LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(jLabelEclemmaWebsite))
                    .addComponent(jCheckBoxEnableConsoleReport)
                    .addComponent(jCheckBoxEnableHtmlReport)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jCheckBoxEnableHighlighting)
                        .addGap(29, 29, 29)
                        .addComponent(jLabelColorTheme)
                        .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jComboBoxColorTheme, GroupLayout.PREFERRED_SIZE, 238, GroupLayout.PREFERRED_SIZE))
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jLabelWorkfiles)
                        .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jComboBoxWorkfiles, GroupLayout.PREFERRED_SIZE, 200, GroupLayout.PREFERRED_SIZE))
                    .addGroup(layout.createSequentialGroup()
                        .addGap(21, 21, 21)
                        .addGroup(layout.createParallelGroup(GroupLayout.Alignment.LEADING)
                            .addComponent(jCheckBoxEnableHighlightingExtended)
                            .addComponent(jCheckBoxOpenHtmlReport))))
                .addContainerGap(GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
            .addGroup(layout.createSequentialGroup()
                .addGap(32, 32, 32)
                .addComponent(jLabelUseCustomJaCoCoJar)
                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jTextFieldUseCustomJaCoCoJar)
                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jButtonSelectCustomJaCoCoJar))
        );
        layout.setVerticalGroup(layout.createParallelGroup(GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(GroupLayout.Alignment.BASELINE)
                    .addComponent(jCheckBoxEnableHighlighting)
                    .addComponent(jLabelColorTheme)
                    .addComponent(jComboBoxColorTheme, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jCheckBoxEnableHighlightingExtended)
                .addPreferredGap(LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jCheckBoxEnableConsoleReport)
                .addPreferredGap(LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jCheckBoxEnableHtmlReport)
                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jCheckBoxOpenHtmlReport)
                .addPreferredGap(LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(layout.createParallelGroup(GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabelWorkfiles)
                    .addComponent(jComboBoxWorkfiles, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabelUseBundledJaCoCoJar)
                    .addComponent(jCheckBoxUseBundledJaCoCoJar)
                    .addComponent(jLabelEclemmaWebsite))
                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(GroupLayout.Alignment.BASELINE)
                    .addComponent(jTextFieldUseCustomJaCoCoJar, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabelUseCustomJaCoCoJar)
                    .addComponent(jButtonSelectCustomJaCoCoJar))
                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(jLabelWorkfilesTips, GroupLayout.PREFERRED_SIZE, 37, GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(layout.createParallelGroup(GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createParallelGroup(GroupLayout.Alignment.BASELINE)
                        .addComponent(jButtonResoreDefaults)
                        .addComponent(jButtonOnlineHelp)
                        .addComponent(jButtonAbout))
                    .addGroup(layout.createParallelGroup(GroupLayout.Alignment.TRAILING)
                        .addComponent(jButtonSocialJojohome, GroupLayout.Alignment.LEADING, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                        .addGroup(layout.createParallelGroup(GroupLayout.Alignment.LEADING, false)
                            .addComponent(jButtonSocialTwitter, GroupLayout.Alignment.TRAILING, GroupLayout.DEFAULT_SIZE, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(jButtonSocialFacebook, GroupLayout.Alignment.TRAILING, GroupLayout.DEFAULT_SIZE, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(jButtonSocialGithub, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)))))
        );
    }// </editor-fold>//GEN-END:initComponents

    private void jButtonResoreDefaultsActionPerformed(ActionEvent evt) {//GEN-FIRST:event_jButtonResoreDefaultsActionPerformed
		jCheckBoxEnableHighlighting.setSelected(Globals.DEF_ENABLE_HIGHLIGHT);
		jCheckBoxEnableConsoleReport.setSelected(Globals.DEF_ENABLE_CONSOLE_REPORT);
		jCheckBoxEnableHtmlReport.setSelected(Globals.DEF_ENABLE_HTML_REPORT);
		jCheckBoxOpenHtmlReport.setSelected(Globals.DEF_AUTOOPEN_HTML_REPORT);
		jCheckBoxOpenHtmlReport.setEnabled(jCheckBoxEnableHtmlReport.isSelected());
		jComboBoxColorTheme.setSelectedIndex(Globals.DEF_THEME);
		jComboBoxColorTheme.setEnabled(jCheckBoxEnableHighlighting.isSelected());
		jComboBoxWorkfiles.setSelectedIndex(Globals.DEF_JACOCOWORKFILES_RULE);
		jCheckBoxEnableHighlightingExtended.setSelected(Globals.DEF_ENABLE_HIGHLIGHTEXTENDED);
		jCheckBoxEnableHighlightingExtended.setEnabled(jCheckBoxEnableHighlighting.isSelected());
		jCheckBoxUseBundledJaCoCoJar.setSelected(!Globals.DEF_USE_CUSTOM_JACOCO_JAR);
		jTextFieldUseCustomJaCoCoJar.setText(Globals.DEF_CUSTOM_JACOCO_JAR_PATH);;
		jTextFieldUseCustomJaCoCoJar.setVisible(!jCheckBoxUseBundledJaCoCoJar.isSelected());
		jButtonSelectCustomJaCoCoJar.setVisible(!jCheckBoxUseBundledJaCoCoJar.isSelected());
		jLabelUseCustomJaCoCoJar.setVisible(!jCheckBoxUseBundledJaCoCoJar.isSelected());
    }//GEN-LAST:event_jButtonResoreDefaultsActionPerformed

    private void jButtonSocialTwitterActionPerformed(ActionEvent evt) {//GEN-FIRST:event_jButtonSocialTwitterActionPerformed
		NBUtils.extBrowser("https://twitter.com/JLermitage");
    }//GEN-LAST:event_jButtonSocialTwitterActionPerformed

    private void jButtonSocialFacebookActionPerformed(ActionEvent evt) {//GEN-FIRST:event_jButtonSocialFacebookActionPerformed
		NBUtils.extBrowser("https://www.facebook.com/jonathan.lermitage");
    }//GEN-LAST:event_jButtonSocialFacebookActionPerformed

    private void jButtonSocialGithubActionPerformed(ActionEvent evt) {//GEN-FIRST:event_jButtonSocialGithubActionPerformed
		NBUtils.extBrowser("https://github.com/jonathanlermitage");
    }//GEN-LAST:event_jButtonSocialGithubActionPerformed

    private void jButtonOnlineHelpActionPerformed(ActionEvent evt) {//GEN-FIRST:event_jButtonOnlineHelpActionPerformed
		NBUtils.extBrowser("https://github.com/jonathanlermitage/tikione-jacocoverage/blob/master/README.md");
    }//GEN-LAST:event_jButtonOnlineHelpActionPerformed

    private void jButtonSocialJojohomeActionPerformed(ActionEvent evt) {//GEN-FIRST:event_jButtonSocialJojohomeActionPerformed
		NBUtils.extBrowser("http://lermitage.biz");
    }//GEN-LAST:event_jButtonSocialJojohomeActionPerformed

    private void jCheckBoxEnableHtmlReportActionPerformed(ActionEvent evt) {//GEN-FIRST:event_jCheckBoxEnableHtmlReportActionPerformed
		jCheckBoxOpenHtmlReport.setEnabled(jCheckBoxEnableHtmlReport.isSelected());
    }//GEN-LAST:event_jCheckBoxEnableHtmlReportActionPerformed

    private void jCheckBoxEnableHighlightingActionPerformed(ActionEvent evt) {//GEN-FIRST:event_jCheckBoxEnableHighlightingActionPerformed
		jComboBoxColorTheme.setEnabled(jCheckBoxEnableHighlighting.isSelected());
		jCheckBoxEnableHighlightingExtended.setEnabled(jCheckBoxEnableHighlighting.isSelected());
    }//GEN-LAST:event_jCheckBoxEnableHighlightingActionPerformed

    private void jButtonAboutActionPerformed(ActionEvent evt) {//GEN-FIRST:event_jButtonAboutActionPerformed
		AboutDialog about = new AboutDialog(null, true);
		about.setVisible(true);
    }//GEN-LAST:event_jButtonAboutActionPerformed

    private void jCheckBoxUseBundledJaCoCoJarActionPerformed(ActionEvent evt) {//GEN-FIRST:event_jCheckBoxUseBundledJaCoCoJarActionPerformed
		boolean selected = jCheckBoxUseBundledJaCoCoJar.isSelected();
		jTextFieldUseCustomJaCoCoJar.setEnabled(!selected);
		jTextFieldUseCustomJaCoCoJar.setEditable(!selected);
		jButtonSelectCustomJaCoCoJar.setEnabled(!selected);
		jTextFieldUseCustomJaCoCoJar.setVisible(!jCheckBoxUseBundledJaCoCoJar.isSelected());
		jButtonSelectCustomJaCoCoJar.setVisible(!jCheckBoxUseBundledJaCoCoJar.isSelected());
		jLabelUseCustomJaCoCoJar.setVisible(!jCheckBoxUseBundledJaCoCoJar.isSelected());
		
    }//GEN-LAST:event_jCheckBoxUseBundledJaCoCoJarActionPerformed

    private void jButtonSelectCustomJaCoCoJarActionPerformed(ActionEvent evt) {//GEN-FIRST:event_jButtonSelectCustomJaCoCoJarActionPerformed
		JFileChooser dialogue = new JFileChooser();
		dialogue.setMultiSelectionEnabled(false);
		dialogue.setFileSelectionMode(JFileChooser.FILES_AND_DIRECTORIES);
		dialogue.setAcceptAllFileFilterUsed(false);
		dialogue.setFileFilter(new FileFilter() {

			@Override
			public boolean accept(File f) {
				return f.getName().toUpperCase().endsWith(".JAR") || f.isDirectory();
			}

			@Override
			public String getDescription() {
				return "JaCoCo jacocoagent jar file (.jar)";
			}
		});
		if (dialogue.showOpenDialog(this) == JFileChooser.APPROVE_OPTION) {
			File javaagentFile = dialogue.getSelectedFile();
			if (javaagentFile != null && javaagentFile.isFile()) {
				jTextFieldUseCustomJaCoCoJar.setText(javaagentFile.getAbsolutePath());
			}
		}
    }//GEN-LAST:event_jButtonSelectCustomJaCoCoJarActionPerformed

    private void jLabelEclemmaWebsiteMouseClicked(MouseEvent evt) {//GEN-FIRST:event_jLabelEclemmaWebsiteMouseClicked
		NBUtils.extBrowser("http://www.eclemma.org/jacoco/");
    }//GEN-LAST:event_jLabelEclemmaWebsiteMouseClicked

	/** Load user preferences and configure UI. */
	void load() {
		Config.sync();
		jCheckBoxEnableHighlighting.setSelected(Config.isEnblHighlighting());
		jCheckBoxEnableConsoleReport.setSelected(Config.isEnblConsoleReport());
		jCheckBoxEnableHtmlReport.setSelected(Config.isEnblHtmlReport());
		jCheckBoxOpenHtmlReport.setSelected(Config.isOpenHtmlReport());
		jCheckBoxOpenHtmlReport.setEnabled(jCheckBoxEnableHtmlReport.isSelected());
		jComboBoxColorTheme.setSelectedIndex(Config.getTheme());
		jComboBoxColorTheme.setEnabled(jCheckBoxEnableHighlighting.isSelected());
		jComboBoxWorkfiles.setSelectedIndex(Config.getJaCoCoWorkfilesRule());
		jCheckBoxEnableHighlightingExtended.setSelected(Config.isEnblHighlightingExtended());
		jCheckBoxEnableHighlightingExtended.setEnabled(jCheckBoxEnableHighlighting.isSelected());
		jCheckBoxUseBundledJaCoCoJar.setSelected(!Config.isUseCustomJacocoJar());
		jTextFieldUseCustomJaCoCoJar.setVisible(!jCheckBoxUseBundledJaCoCoJar.isSelected());
		jTextFieldUseCustomJaCoCoJar.setText(Config.getCustomJacocoJarPath());
		jButtonSelectCustomJaCoCoJar.setVisible(!jCheckBoxUseBundledJaCoCoJar.isSelected());
		jLabelUseCustomJaCoCoJar.setVisible(!jCheckBoxUseBundledJaCoCoJar.isSelected());
	}

	/** Store configuration to user preferences. */
	void store() {
		Config.setEnblConsoleReport(jCheckBoxEnableConsoleReport.isSelected());
		Config.setEnblHighlighting(jCheckBoxEnableHighlighting.isSelected());
		Config.setEnblHtmlReport(jCheckBoxEnableHtmlReport.isSelected());
		Config.setOpenHtmlReport(jCheckBoxOpenHtmlReport.isSelected());
		Config.setTheme(jComboBoxColorTheme.getSelectedIndex());
		Config.setJaCoCoWorkfilesRule(jComboBoxWorkfiles.getSelectedIndex());
		Config.setEnblHighlightingExtended(jCheckBoxEnableHighlightingExtended.isSelected());
		Config.setUseCustomJacocoJar(!jCheckBoxUseBundledJaCoCoJar.isSelected());
		Config.setCustomJacocoJarPath(jTextFieldUseCustomJaCoCoJar.getText());
		Config.flush();
	}

	boolean valid() {
		return true;
	}
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private JButton jButtonAbout;
    private JButton jButtonOnlineHelp;
    private JButton jButtonResoreDefaults;
    private JButton jButtonSelectCustomJaCoCoJar;
    private JButton jButtonSocialFacebook;
    private JButton jButtonSocialGithub;
    private JButton jButtonSocialJojohome;
    private JButton jButtonSocialTwitter;
    private JCheckBox jCheckBoxEnableConsoleReport;
    private JCheckBox jCheckBoxEnableHighlighting;
    private JCheckBox jCheckBoxEnableHighlightingExtended;
    private JCheckBox jCheckBoxEnableHtmlReport;
    private JCheckBox jCheckBoxOpenHtmlReport;
    private JCheckBox jCheckBoxUseBundledJaCoCoJar;
    private JComboBox<Object> jComboBoxColorTheme;
    private JComboBox<String> jComboBoxWorkfiles;
    private JLabel jLabelColorTheme;
    private JLabel jLabelEclemmaWebsite;
    private JLabel jLabelUseBundledJaCoCoJar;
    private JLabel jLabelUseCustomJaCoCoJar;
    private JLabel jLabelWorkfiles;
    private JLabel jLabelWorkfilesTips;
    private JTextField jTextFieldUseCustomJaCoCoJar;
    // End of variables declaration//GEN-END:variables
}
